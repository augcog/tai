# Auto-activate Poetry environment when entering this directory
# This is sourced by direnv if installed, otherwise can be sourced manually

if command -v poetry >/dev/null 2>&1; then
    if [[ -f "pyproject.toml" ]]; then
        # Get the virtual environment path
        VENV_PATH="$(poetry env info --path 2>/dev/null)"
        
        if [[ -n "$VENV_PATH" && -d "$VENV_PATH" ]]; then
            echo "üêç Activating Poetry environment: $(basename "$VENV_PATH")"
            export VIRTUAL_ENV="$VENV_PATH"
            export PATH="$VIRTUAL_ENV/bin:$PATH"
            export POETRY_ACTIVE=1
            
            # Unset PYTHONHOME if set
            unset PYTHONHOME
        else
            echo "‚ö†Ô∏è  Poetry environment not found. Run 'poetry install' to create it."
        fi
    fi
fi