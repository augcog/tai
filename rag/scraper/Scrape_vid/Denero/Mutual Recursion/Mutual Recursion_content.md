# "Luhn Algorithm: Implementing Credit Card Checksum Calculation"

##  Mutual recursion occurs when two different functions call each other. So now we're finally going to implement the LUN algorithm, which is actually used to compute the check sum of credit card number. So here's the description from Wikipedia. From the rightmost digit, which is the check digit, moving left. Double the value of every second digit. If product of this doubling operation is greater than 9, then sum the digits of the products. Take the sum of all the digits. So how does this work? Well, let's compute the LUN sum of 1, 3, 8, 7, 4, 3. We do that by taking each digit, except for every other digit, which I've grayed out, gets doubled. Starting from the rightmost, 3 just becomes 3, 4, gets double to 8, 7, 7. 8 gets double to 16, since the result of the operation is greater than 9, we're then sum 1 and 6 to get 7. 3 is 3 and 1 is 2. So then 2 plus 3 plus 7 plus 7 plus 8 plus 3 is 30. And a valid credit card number will always have a LUN sum, which is a multiple of 10. So what's the point? Well, the nice thing about the LUN sum is that, if any one digit is incorrect, then the LUN sum will be something other than a multiple of 10. Moreover, almost all transpositions. So say I switch the 4 and the 7 will be detected by the LUN sum algorithm. And give a result that's not a multiple of 10. So let's write a function that computes this.

# "LUN Sum: A Recursive Algorithm for Validating Credit Card Numbers"

##  The LUN sum of n. Well, it's very similar to some digits. If less n is less than 10, then we just return n. Otherwise, we get the last digit. And we're going to return something plus the last digit. But that's something will be not a call to LUN sum, but instead a call to LUN sum double. And what the double version will do is it will double the last digit. And some of its digits, if necessary, before adding that digit in, as we specified before. OK, so a LUN sum just takes the last digit if there's only one. Otherwise, it does this double it. So let's compute that double digit. So the first thing we'll do is we'll break up n. And then we'll compute the LUN digit, which is the sum of the digits of two times the last. Now, if n is less than 10, we just return the LUN digit. Otherwise, we'll return the LUN sum of all, but the last digit plus the LUN digit that we computed, that one that got double. So notice that LUN sum calls LUN sum double, and LUN sum double calls LUN sum. This is mutual recursion, when two functions call each other. Now, base cases can appear in both those functions, or in only one. In this case, we see that it appears in both. OK, so the LUN sum of just the number two is two. So if I look at 32, then the three gets doubled to eight to six, and plus two is eight. And if I take the LUN sum of a valid credit card number, so here's a valid master card number, it doesn't work, but it's within the range of numbers that master card uses, then we'll get a LUN sum, which is a multiple of 10 such as 20. So if you want to try this out on your own credit card, you can check to make sure that it's valid by making sure that its LUN sum is a multiple of 10. Or if that's too much work, you can just send your credit card number to me. I'll check it for you.

